<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>General interconnect - Project Combine</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../custom.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                    </div>

                    <h1 class="menu-title">Project Combine</h1>

                    <div class="right-buttons">

                    </div>
                </div>


                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="general-interconnect"><a class="header" href="#general-interconnect">General interconnect</a></h1>
<p>The general interconnect of Virtex 2 is made of several kinds of similar, but not identical interconnect tiles. The tile types include:</p>
<ul>
<li><code>INT.CLB</code>, the interconnect tile associated with <a href="clb.html">configurable logic blocks</a></li>
<li><code>INT.BRAM</code>, the interconnect tile associated with <a href="bram.html">block RAMs</a></li>
<li><code>INT.{IOI|IOI.CLK_B|IOI.CLK_T}</code>, the interconnect tile associated with <a href="io.html">I/O tiles</a></li>
<li><code>INT.DCM.{V2|V2P}</code>, the interconnect tiles associated with <a href="dcm.html">digital clock managers</a></li>
<li><code>INT.CNR</code>, the interconnect tile associated with <a href="corner.html">corner tiles</a></li>
<li><code>INT.PPC</code>, the interconnect tile associated with <a href="ppc.html">PowerPC cores</a> and multi-gigabit transceivers</li>
<li><code>INT.GT.CLKPAD</code>, the interconnect tile associated with multi-gigabit transceivers in the I/O row</li>
</ul>
<p>The various tile types have the same backbone, but differ in the types of input multiplexers they have, and the primitive outputs they accept.</p>
<h2 id="backbone"><a class="header" href="#backbone">Backbone</a></h2>
<p>The core of the interconnect is made of the following wires, each of which is instantiated once per interconnect tile and is driven by a buffered multiplexer:</p>
<ul>
<li>
<p><code>OMUX0</code> through <code>OMUX15</code>, per-tile output multiplexers. The inputs to those include various primitive outputs in the tile. They serve as single-hop interconnect wires — each <code>OMUX</code> wire is also visible in one or two of the (immediately or diagonally) adjacent interconnect tiles:</p>
<div class="table-wrapper"><table><thead><tr><th>Wire</th><th>Direction</th><th>Wire in tile #1</th><th>Wire in tile #2</th></tr></thead><tbody>
<tr><td><code>OMUX0</code></td><td><code>S</code></td><td><code>OMUX0.S</code></td><td></td></tr>
<tr><td><code>OMUX1</code></td><td><code>W</code>, then <code>S</code></td><td><code>OMUX1.W</code></td><td><code>OMUX1.WS</code></td></tr>
<tr><td><code>OMUX2</code></td><td><code>E</code> and <code>S</code></td><td><code>OMUX2.E</code></td><td><code>OMUX2.S</code></td></tr>
<tr><td><code>OMUX3</code></td><td><code>S</code>, then <code>E</code></td><td><code>OMUX3.S</code></td><td><code>OMUX3.SE</code></td></tr>
<tr><td><code>OMUX4</code></td><td><code>S</code></td><td><code>OMUX4.S</code></td><td></td></tr>
<tr><td><code>OMUX5</code></td><td><code>S</code>, then <code>W</code></td><td><code>OMUX5.S</code></td><td><code>OMUX5.SW</code></td></tr>
<tr><td><code>OMUX6</code></td><td><code>W</code></td><td><code>OMUX6.W</code></td><td></td></tr>
<tr><td><code>OMUX7</code></td><td><code>E</code>, then <code>S</code></td><td><code>OMUX7.E</code></td><td><code>OMUX7.ES</code></td></tr>
<tr><td><code>OMUX8</code></td><td><code>E</code>, then <code>N</code></td><td><code>OMUX8.E</code></td><td><code>OMUX8.EN</code></td></tr>
<tr><td><code>OMUX9</code></td><td><code>W</code></td><td><code>OMUX9.W</code></td><td></td></tr>
<tr><td><code>OMUX10</code></td><td><code>N</code>, then <code>W</code></td><td><code>OMUX10.N</code></td><td><code>OMUX10.NW</code></td></tr>
<tr><td><code>OMUX11</code></td><td><code>N</code></td><td><code>OMUX11.N</code></td><td></td></tr>
<tr><td><code>OMUX12</code></td><td><code>N</code>, then <code>E</code></td><td><code>OMUX12.N</code></td><td><code>OMUX12.NE</code></td></tr>
<tr><td><code>OMUX13</code></td><td><code>E</code> and <code>N</code></td><td><code>OMUX13.E</code></td><td><code>OMUX13.N</code></td></tr>
<tr><td><code>OMUX14</code></td><td><code>W</code>, then <code>N</code></td><td><code>OMUX14.W</code></td><td><code>OMUX12.WN</code></td></tr>
<tr><td><code>OMUX15</code></td><td><code>N</code></td><td><code>OMUX15.N</code></td><td></td></tr>
</tbody></table>
</div></li>
<li>
<p>Double lines going in the cardinal directions, 10 per direction, called <code>DBL.[EWSN][0-9]</code>. Each of them has three segments, called <code>DBL.[EWSN][0-9].[0-2]</code>, where <code>.0</code> is located in the source tile and is driven, <code>.1</code> is in the next tile in the relevant direction, and <code>.2</code> is in the next tile after that. Some of the lines additionally have a fourth segment:</p>
<ul>
<li><code>DBL.W[89].3</code> is to the north of <code>DBL.W[89].2</code></li>
<li><code>DBL.E[01].3</code> is to the south of <code>DBL.E[01].2</code></li>
<li><code>DBL.S[01].3</code> is to the south of <code>DBL.S[01].2</code></li>
<li><code>DBL.N[89].3</code> is to the north of <code>DBL.N[89].2</code></li>
</ul>
<p>Only the <code>.0</code> segment is driven. The inputs to the multiplexer include:</p>
<ul>
<li><code>OMUX</code> wires</li>
<li><code>.1</code>, <code>.2</code> and <code>.3</code> segments of other <code>DBL</code> wires</li>
<li><code>.3</code>, <code>.6</code> and <code>.7</code> segments of <code>HEX</code> wires</li>
<li><code>OUT.FAN</code> wires</li>
</ul>
</li>
<li>
<p>Hex lines going in the cardinal directions, 10 per direction, called <code>HEX.[EWSN][0-9]</code>. They are analogous to double lines, except they have 7 (or sometimes 8) segments, thus spanning a distance of 6 tiles. The lines with 8th segment include:</p>
<ul>
<li><code>HEX.W[89].7</code> is to the north of <code>HEX.W[89].6</code></li>
<li><code>HEX.E[01].7</code> is to the south of <code>HEX.E[01].6</code></li>
<li><code>HEX.S[01].7</code> is to the south of <code>HEX.S[01].6</code></li>
<li><code>HEX.N[89].7</code> is to the north of <code>HEX.N[89].6</code></li>
</ul>
<p>Only the <code>.0</code> segment is driven. The inputs to the multiplexer include:</p>
<ul>
<li><code>OMUX</code> wires</li>
<li><code>.3</code>, <code>.6</code> and <code>.7</code> segments of other <code>HEX</code> wires</li>
<li><code>.0</code>, <code>.6</code>, <code>.12</code>, <code>.18</code> segments of <code>LV</code> wires (for vertical lines)</li>
<li><code>.0</code>, <code>.6</code>, <code>.12</code>, <code>.18</code> segments of <code>LH</code> wires (for horizontal lines)</li>
<li><code>OUT.FAN</code> wires</li>
</ul>
<p>Some hex lines are associated with various kind of input multiplexers, such that a single hex line can drive all input multiplexers of given type through its <code>.0</code> to <code>.5</code> segments:</p>
<ul>
<li><code>HEX.[SN]0</code> is associated with <code>IMUX.SR*</code></li>
<li><code>HEX.[SN]1</code> is associated with <code>IMUX.IOI.TS1*</code></li>
<li><code>HEX.[SN]3</code> is associated with <code>IMUX.TI*</code>, <code>IMUX.TS*</code>, and <code>IMUX.IOI.ICLK*</code></li>
<li><code>HEX.[SN]4</code> is associated with <code>IMUX.IOI.TS2*</code></li>
<li><code>HEX.[SN]5</code> is associated with <code>IMUX.IOI.ICE*</code></li>
<li><code>HEX.[SN]6</code> is associated with <code>IMUX.CLK*</code> and <code>IMUX.DCMCLK*</code></li>
<li><code>HEX.[SN]8</code> is associated with <code>IMUX.IOI.TCE*</code></li>
<li><code>HEX.[SN]9</code> is associated with <code>IMUX.CE*</code></li>
</ul>
</li>
</ul>
<p>For large-fanout nets or nets that need to span long distances, the interconnect also has long lines that span the whole width or height of the device. There are 24 vertical long lines, <code>LV</code>, per an interconnect column, and 24 horizontal long lines, <code>LH</code>, per an interconnect row. They are visible as <code>LV.{0-23}</code> and <code>LH.{0-23}</code> segments in each interconnect tile, in a rotating way: <code>LH.0</code> in a given tile is visible as <code>LH.1</code> or <code>LH.23</code> in the horizontally adjacent tiles.
Only <code>.0</code>, <code>.6</code>, <code>.12</code>, <code>.18</code> segments of long wires are actually accessible to a tile — the rest are just passing through.</p>
<p>Each interconnect tile can optionally drive the long line segments accessible to it via buffered multiplexers. The inputs to <code>LH</code> driver multiplexers include:</p>
<ul>
<li><code>OMUX</code> wires</li>
<li><code>.1</code> segments of <code>DBL</code> wires</li>
</ul>
<p>The inputs to <code>LV</code> driver multiplexers include:</p>
<ul>
<li><code>OMUX</code> wires</li>
<li><code>.1</code> segments of <code>DBL</code> wires</li>
<li>various segments of <code>HEX.E1</code> and <code>HEX.W7</code> wires</li>
</ul>
<p>The every-6-tiles nature of long wires combined with existence of hex wires allows for easy distribution of signals everywhere on the FPGA.</p>
<h2 id="input-multiplexers"><a class="header" href="#input-multiplexers">Input multiplexers</a></h2>
<p>Every interconnect tile also contains input multiplexers, which drive the associated primitive inputs. The exact set of available input multiplexers depends on the type of interconnect tile.</p>
<p>The baseline set of input muxes is present in the <code>INT.CLB</code> tile:</p>
<ul>
<li>
<p><code>IMUX.CLK[0-3]</code>: four clock inputs. In CLBs, they correspond to the four <code>SLICE</code>\ s. They are multiplexed from:</p>
<ul>
<li><code>PULLUP</code>, a dummy always-1 wire</li>
<li><code>GCLK0</code> through <code>GCLK7</code>, the <a href="clock.html">clock interconnect</a> global lines</li>
<li>various segments of <code>DBL</code> lines</li>
<li>any segment of <code>HEX.S6</code> and <code>HEX.N6</code> lines</li>
</ul>
<p>The <code>IMUX.CLK</code> multiplexers have a programmable inverter.</p>
</li>
<li>
<p><code>IMUX.SR[0-3]</code>: four set/reset inputs. In CLBs, they correspond to the four <code>SLICE</code>\ s. They are multiplexed from:</p>
<ul>
<li><code>PULLUP</code>, a dummy always-1 wire</li>
<li>various segments of <code>DBL</code> lines</li>
<li>any segment of <code>HEX.S0</code> and <code>HEX.N0</code> lines</li>
</ul>
<p>The <code>IMUX.SR</code> multiplexers have a programmable inverter.</p>
</li>
<li>
<p><code>IMUX.CE[0-3]</code>: four clock enable inputs. In CLBs, they correspond to the four <code>SLICE</code>\ s. They are multiplexed from:</p>
<ul>
<li><code>PULLUP</code>, a dummy always-1 wire</li>
<li>various segments of <code>DBL</code> lines</li>
<li>any segment of <code>HEX.S9</code> and <code>HEX.N9</code> lines</li>
</ul>
<p>The <code>IMUX.CE</code> multiplexers have a programmable inverter.</p>
</li>
<li>
<p><code>IMUX.TI[0-1]</code>: two tristate buffer data inputs. In CLBs, they correspond to the two <code>TBUF</code>\ s. They are multiplexed from:</p>
<ul>
<li><code>PULLUP</code>, a dummy always-1 wire</li>
<li><code>OMUX</code> wires</li>
<li>various segments of <code>DBL</code> lines</li>
<li>any segment of <code>HEX.S3</code> and <code>HEX.N3</code> lines</li>
</ul>
<p>The <code>IMUX.TI</code> multiplexers have a programmable inverter.</p>
</li>
<li>
<p><code>IMUX.TS[0-1]</code>: two tristate buffer enable inputs. In CLBs, they correspond to the two <code>TBUF</code>\ s. They are multiplexed from:</p>
<ul>
<li><code>PULLUP</code>, a dummy always-1 wire</li>
<li>various segments of <code>DBL</code> lines</li>
<li>any segment of <code>HEX.S3</code> and <code>HEX.N3</code> lines</li>
</ul>
<p>The <code>IMUX.TS</code> multiplexers have a programmable inverter.</p>
</li>
<li>
<p><code>IMUX.S[0-3].B[XY]</code>: 8 bypass inputs, specific to CLBs. They are special in that they can be used both as primitive inputs and as extra routing resources to reach other primitive inputs. They are multiplexed from:</p>
<ul>
<li><code>PULLUP</code>, a dummy always-1 wire</li>
<li><code>OMUX</code> wires</li>
<li>various segments of <code>DBL</code> lines</li>
<li>other <code>IMUX.S[0-3].B[XY]</code> wires</li>
</ul>
<p>These inputs have a programmable inverter. However, the inverter only affects the <code>SLICE</code> input — it doesn't affect the value seen when this wire is used as input to another <code>IMUX</code>.</p>
<p>TODO: verify the inverter behavior, just in case</p>
</li>
<li>
<p><code>IMUX.S[0-3].[FG][0-3]</code>: 32 LUT inputs, specific to CLBs. They are multiplexed from:</p>
<ul>
<li><code>PULLUP</code>, a dummy always-1 wire</li>
<li><code>OMUX</code> wires</li>
<li>various segments of <code>DBL</code> lines</li>
<li><code>IMUX.S[0-3].B[XY]</code> wires</li>
<li><code>OUT.FAN</code> wires</li>
</ul>
</li>
</ul>
<p>The <code>INT.CNR</code> and <code>INT.PPC</code> tiles have a similar set of input multiplexers, with some differences:</p>
<ul>
<li>
<p>the <code>IMUX.S[0-3].*</code> wires are not present</p>
</li>
<li>
<p><code>IMUX.G[0-3].FAN[0-1]</code> wires replace <code>IMUX.S[0-3].B[XY]</code>. They are similar, but do not include the programmable inverter. They are multiplexed from:</p>
<ul>
<li><code>PULLUP</code>, a dummy always-1 wire</li>
<li><code>OMUX</code> wires</li>
<li>various segments of <code>DBL</code> lines</li>
<li>other <code>IMUX.G[0-3].FAN[0-1]</code> wires</li>
</ul>
</li>
<li>
<p><code>IMUX.G[0-3].DATA[0-7]</code> wires replace <code>IMUX.S[0-3].[FG][0-3]</code>. They are multplexed from the same sources as <code>IMUX.G[0-3].FAN[0-1]</code> wires (thus removing the <code>OUT.FAN</code> sources present in CLBs).</p>
</li>
</ul>
<p>The <code>INT.BRAM</code> tile is a variant of <code>INT.CNR</code> with the following differences:</p>
<ul>
<li>
<p><code>IMUX.G[0-3].DATA[0-1]</code> wires are not present</p>
</li>
<li>
<p><code>IMUX.BRAM_ADDR[AB][0-3]</code> replace the above. They are used for blockram address inputs. They are multiplexed from:</p>
<ul>
<li><code>PULLUP</code>, a dummy always-1 wire</li>
<li><code>OMUX</code> wires</li>
<li>various segments of <code>DBL</code> lines</li>
<li><code>IMUX.G[0-3].FAN[0-1]</code> wires</li>
<li><code>IMUX.BRAM_ADDR[AB][0-3]</code> lines of the interconnect tile 4 tiles to the south or to the north of this tile (with matching <code>[0-3]</code> index, but any <code>[AB]</code> letter)</li>
</ul>
<p>The extra cascading input allows for distribution of identical addresses across a whole column of BRAMs without using general routing resources.</p>
<p>The PowerPC cores are special: when a blockram is adjacent to a PowerPC core, the multiplexer inputs that would normally source from the adjacent blockram's <code>IMUX.BRAM_ADDR*</code> are instead connected to the PowerPC core's primitive outputs that drive OCM addresses. This once again allows routing resource savings.</p>
</li>
</ul>
<p>The <code>INT.DCM.*</code> and <code>INT.GT.CLKPAD</code> tiles are a variant of <code>INT.CNR</code> with the following differences:</p>
<ul>
<li>
<p><code>IMUX.CE[0-1]</code>, <code>IMUX.CLK[0-3]</code> and <code>IMUX.TS[0-1]</code> are not present</p>
</li>
<li>
<p><code>IMUX.DCMCLK[0-3]</code> wires replace <code>IOMUX.CLK[0-3]</code>. They are multiplexed from:</p>
<ul>
<li><code>PULLUP</code>, a dummy always-1 wire</li>
<li><code>GCLK0</code> through <code>GCLK7</code></li>
<li><code>DCM.CLKPAD[0-7]</code>, direct inputs from clock I/O pads (see <a href="clock.html">clock interconnect</a>)</li>
<li>various segments of <code>DBL</code> lines</li>
<li>any segment of <code>HEX.S6</code> and <code>HEX.N6</code> lines</li>
</ul>
<p>The <code>IMUX.DCMCLK</code> multiplexers have a programmable inverter.</p>
</li>
</ul>
<p>The <code>INT.IOI*</code> tiles are a variant of <code>INT.CNR</code> with the following differences:</p>
<ul>
<li>
<p><code>IMUX.TI[0-1]</code> and <code>IMUX.TS[0-1]</code> are not present</p>
</li>
<li>
<p><code>IMUX.G[0-3].DATA[0-4]</code> are not present</p>
</li>
<li>
<p>new multiplexers are added:</p>
<ul>
<li>
<p><code>IMUX.IOI.ICLK[0-3]</code>: four more clock inputs (used for I/O input clocks, while <code>IMUX.CLK</code> are used for output clocks). Multiplexed from:</p>
<ul>
<li><code>PULLUP</code>, a dummy always-1 wire</li>
<li><code>GCLK0</code> through <code>GCLK7</code>, the <a href="clock.html">clock interconnect</a> global lines</li>
<li>various segments of <code>DBL</code> lines</li>
<li>any segment of <code>HEX.S3</code> and <code>HEX.N3</code> lines</li>
</ul>
</li>
<li>
<p><code>IMUX.IOI.TS[12][0-3]</code>: tristate inputs. Multiplexed from:</p>
<ul>
<li><code>PULLUP</code>, a dummy always-1 wire</li>
<li>various segments of <code>DBL</code> lines</li>
<li><code>TS1</code>: any segment of <code>HEX.S1</code> and <code>HEX.N1</code> lines</li>
<li><code>TS2</code>: any segment of <code>HEX.S4</code> and <code>HEX.N4</code> lines</li>
<li><code>IMUX.G[0-3].FAN[0-1]</code> wires</li>
</ul>
</li>
<li>
<p><code>IMUX.IOI.[IT]CE[0-3]</code>: clock enable inputs. Multiplexed from:</p>
<ul>
<li><code>PULLUP</code>, a dummy always-1 wire</li>
<li>various segments of <code>DBL</code> lines</li>
<li><code>ICE</code>: any segment of <code>HEX.S5</code> and <code>HEX.N5</code> lines</li>
<li><code>TCE</code>: any segment of <code>HEX.S8</code> and <code>HEX.N8</code> lines</li>
<li><code>IMUX.G[0-3].FAN[0-1]</code> wires</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="primitive-outputs"><a class="header" href="#primitive-outputs">Primitive outputs</a></h2>
<p>Primitive outputs are wires that go from the various primitives into the general interconnect. The set of available primitive outputs depends on the type of the interconnect tile. The <code>OUT.FAN*</code> outputs can be used as inputs to many interconnect multiplexers, while other outputs can only be routed via <code>OMUX</code> multiplexers.</p>
<p>The <code>INT.CLB</code> tile has the following primitive outputs:</p>
<ul>
<li><code>OUT.FAN[0-7]</code>: the main combinational LUT outputs (<code>X</code> and <code>Y</code>); they have access to many more routing resources than other outputs</li>
<li><code>OUT.SEC[8-23]</code>: the remaining SLICE outputs (<code>XQ</code>, <code>YQ</code>, <code>XB</code>, <code>YB</code>)</li>
<li><code>OUT.TBUS</code>: a tap of one of the tristate lines passing through the CLB</li>
</ul>
<p>Every <code>OMUX</code> multiplexer can mux from all <code>OUT.FAN</code> wires, and all but one of the remaining wires (in a rotating manner).</p>
<p>Note that the bandwidth limitation of 16 <code>OMUX</code> wires per tile means that it is not possible to use all primitive outputs in a CLB simultanously (there is one output too many).</p>
<p>The <code>INT.IOI*</code> tiles have the following primitive outputs:</p>
<ul>
<li><code>OUT.FAN[0-7]</code>: as above</li>
<li><code>OUT.SEC[8-23]</code>: routed to all <code>OMUX</code> wires</li>
</ul>
<p>There is no <code>OMUX</code> bottleneck in these tiles.</p>
<p>The <code>INT.CNR</code> tile has the following primitive outputs:</p>
<ul>
<li><code>OUT.FAN[0-7]</code>: as above</li>
<li><code>OUT.HALF[8-17].[01]</code>: various outputs; <code>.0</code> outputs are routed only to <code>OMUX[0-7]</code> while <code>.1</code> outputs are routed only to <code>OMUX[8-15]</code>, creating a possible bottleneck</li>
</ul>
<p>The <code>OMUX</code> bottleneck is worse in this kind of tile. However, it only matters when accessing test primitives (specifically, the <code>DCI</code> primitives).</p>
<p>The <code>INT.BRAM</code> tile has the following primitive outputs:</p>
<ul>
<li><code>OUT.FAN[0-7]</code></li>
<li><code>OUT.SEC[12-23]</code>: routed to all <code>OMUX</code> wires</li>
<li><code>OUT.HALF[8-11].[01]</code>: as above</li>
</ul>
<p>The <code>OMUX</code> bottleneck in this tile type means it's not possible to instantiate the multiplier together with the blockram with maximum port width. However, this is in practice also prevented by IMUX resource sharing.</p>
<p>The <code>INT.DCM*</code> tiles have the following primitive outputs:</p>
<ul>
<li><code>OUT.SEC[2-13]</code>: routed to all <code>OMUX</code> wires</li>
<li><code>OUT.HALF[14-17].[01]</code>: as above</li>
</ul>
<p><code>OUT.SEC[2-11]</code> correspond to the DCM's clock outputs, which are also routable via dedicated clock routing, and would usually not use the general interconnect.</p>
<p>The <code>OMUX</code> bottleneck in this tile type means that it's not possible to access all the outputs via general interconnect at once. However, this usually doesn't matter, as the clock outputs are generally used via dedicated clock routing, this doesn't matter in practice.</p>
<p>This tile type contains U-turns: some <code>IMUX</code> lines can be routed directly to <code>OMUX</code> for test purposes. They are:</p>
<ul>
<li><code>IMUX.SR[0-3]</code></li>
<li><code>IMUX.TI[0-1]</code></li>
<li><code>IMUX.DCMCLK[0-3]</code></li>
<li><code>IMUX.CE[2-3]</code></li>
<li><code>IMUX.G[0-3].DATA[0-7]</code></li>
</ul>
<p>The <code>INT.PPC</code> and <code>INT.GT.CLKPAD</code> tiles have the following primitive outputs:</p>
<ul>
<li><code>OUT.FAN[0-7]</code></li>
<li><code>OUT.SEC[8-15]</code>, routed to all <code>OMUX</code> wires</li>
<li><code>OUT.TEST[0-15]</code>, used for test outputs, and routed to 2 <code>OMUX</code> wires each</li>
</ul>
<p>The <code>OMUX</code> bottleneck means that it's not possible to access all outputs at once when the <code>OUT.TEST</code> outputs are used.</p>
<p>This tile type contains U-turns: some <code>IMUX</code> lines can be routed directly to <code>OMUX</code> for test purposes. They are:</p>
<ul>
<li><code>IMUX.SR[0-3]</code></li>
<li><code>IMUX.TI[0-1]</code></li>
<li><code>IMUX.TS[0-1]</code></li>
<li><code>IMUX.CLK[0-3]</code> (<code>INT.PPC</code>)</li>
<li><code>IMUX.DCMCLK[0-3]</code> (<code>INT.GT.CLKPAD</code>)</li>
<li><code>IMUX.CE[0-3]</code></li>
<li><code>IMUX.G[0-3].DATA[0-7]</code></li>
</ul>
<p>Additionally, this tile type has associated <code>INTF.*</code> interface tiles that contain testing U-turn logic that can rewire <code>OUT.FAN*</code> and <code>OUT.SEC*</code> to be mirrors of some <code>IMUX</code> pins instead of primitive outputs. There are four types of <code>INTF.*</code> tiles which have identical functionality, but differ in bitstream layout.</p>
<h2 id="terminators"><a class="header" href="#terminators">Terminators</a></h2>
<p>The edges of the device contain special <code>TERM.[EWSN]</code> tiles that handle interconnect lines going out-of-bounds:</p>
<ul>
<li>
<p><code>DBL</code> lines get reflected — eg. northbound lines "bounce off" the top edge and become southbound lines</p>
</li>
<li>
<p><code>HEX</code> lines outgoing from the <code>TERM</code> tile have special multiplexers, with the following choices per each line:</p>
<ul>
<li>reflection: another, incoming <code>HEX</code> line is reflected onto this line</li>
<li>long line (two different taps): one of the <code>LH.*</code> or <code>LV.*</code> segments is driven onto this line</li>
<li>(some lines only) <code>OUT.PCI[01]</code>: one of the <code>PCILOGIC</code> outputs is driven onto this line</li>
</ul>
</li>
</ul>
<p>The <a href="pcilogic.html">PCI logic</a> primitives effectively live outside of normal interconnect tiles, and use <code>TERM.[EW]</code> as their interconnect tiles. They reuse <code>DBL</code> and <code>OMUX</code> interconnect lines for their inputs, and have special <code>OUT.PCI[0-1]</code> primitive outputs that can be connected to outgoing <code>HEX</code> lines in the terminator tiles.</p>
<h2 id="powerpc-holes"><a class="header" href="#powerpc-holes">PowerPC holes</a></h2>
<p>The PowerPC cores create holes in the interconnect structure — the area they occupy has no interconnect tiles. Not all interconnect lines can cross the gap across the PPC core. There are four special tile types around the core:</p>
<ul>
<li><code>PPC.N</code>: present on the bottom edge of the core</li>
<li><code>PPC.S</code>: present on the top edge of the core</li>
<li><code>PPC.E</code>: present on the left edge of the core</li>
<li><code>PPC.W</code>: present on the right edge of the core</li>
</ul>
<p>The long lines pass through the core undisturbed. The <code>DBL</code> lines are reflected as in the <code>TERM</code> tiles. The <code>OMUX</code> lines are likewise reflected. The <code>HEX</code> lines contain a multiplexer with the following choices per each line:</p>
<ul>
<li>passthrough: the line passes through the core and connects to the corresponding line on the other side</li>
<li>reflection: another, incoming <code>HEX</code> line is reflected onto this line</li>
<li>long line (two different taps): one of the <code>LH.*</code> or <code>LV.*</code> segments is driven onto this line</li>
</ul>
<h2 id="clock-spine-top-and-bottom"><a class="header" href="#clock-spine-top-and-bottom">Clock spine top and bottom</a></h2>
<p>The clock spine top and bottom (containing <code>BUFGMUX</code> primitives) live horizontally in between two normal interconnect tiles. They have their own input multiplexers:</p>
<ul>
<li>
<p><code>CLK.IMUX.SEL[0-7]</code>: used for the <code>BUFGMUX</code> <code>S</code> input, multiplexed from:</p>
<ul>
<li><code>PULLUP</code></li>
<li>various <code>DBL</code> horizontal segments</li>
</ul>
</li>
<li>
<p><code>CLK.IMUX.CLK[0-7]</code>: used for the <code>BUFGMUX</code> <code>I[0-1]</code> inputs when not using dedicated clock interconnect, multiplexed from:</p>
<ul>
<li><code>PULLUP</code></li>
<li>various <code>DBL</code> horizontal segments</li>
</ul>
</li>
</ul>
<p>They also have their own primitive outputs:</p>
<ul>
<li><code>CLK.OUT.[0-7]</code>: special <code>BUFGMUX</code> primitive outputs</li>
</ul>
<p>They have eight <code>OMUX</code> lines, multiplexed from the 8 primitive outputs above. The <code>OMUX</code> wires are connected to the neighbouring general interconnect tiles as-if they came from the otherwise out-of-bounds tiles above or below them.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../virtex2/geometry.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../virtex2/interconnect/tiles-int.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../virtex2/geometry.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../virtex2/interconnect/tiles-int.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>



        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
